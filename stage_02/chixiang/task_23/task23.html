<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>task23</title>
    <style media="screen">
      #btn {
        padding-left: 10px;
      }
      div {
        border: 1px solid #000000;
        padding: 10px;
        margin: 10px;
        float: left;
        background-color: white;
      }
    </style>
  </head>
  <body>
    <section id="btn">
  		<button id="pre">先序遍历</button>
  		<button id="in">中序遍历</button>
  		<button id="post">后序遍历</button>
      <input id="search" type="text" name="name">
      <button id="submit">查询</button>
  	</section>
    <div id="root">0
      <div>1
  			<div>2
  				<div>3</div>
  				<div>4</div>
          <div>5</div>
          <div>6</div>
  			</div>
  			<div>7
  				<div>8</div>
  			</div>
        <div>9
  				<div>10
            <div>11</div>
            <div>12</div>
          </div>
  			</div>
  		</div>
  		<div>13
  			<div>14</div>
  			<div>15
  				<div>16</div>
  				<div>17</div>
  			</div>
  		</div>
    </div>
  </body>
  <script type="text/javascript">

    var queue = [], head, timer;

    function preOrder(node) {
      if (node) {
        queue.push(node);
        preOrder(node.firstElementChild);
        preOrder(node.nextElementSibling);
      }
    }

    function inOrder(node) {
      if (node) {
        inOrder(node.firstElementChild);
        queue.push(node);
        inOrder(node.nextElementSibling);
      }
    }

    function postOrder(node) {
      if (node) {
        postOrder(node.firstElementChild);
        postOrder(node.nextElementSibling);
        queue.push(node);
      }
    }

    btn.onclick = function (e){
    				if (queue.length > 0) {
    					head.style.backgroundColor = "#fff";
    					showQueue = [];
    					clearTimeout(timer);
    				}

            switch (e.target.id) {
            					case "pre" :
            					preOrder(document.getElementById("root"));
            					break;
            					case "in" :
            					inOrder(document.getElementById("root"));
            					break;
            					case "post" :
            					postOrder(document.getElementById("root"));
            					break;
                      case "submit" :
                      if (document.getElementById("search").value == "") {
                				alert("请输入搜索内容！");
                				return;
                			}
                			var value = document.getElementById("search").value;
                			preOrder(document.getElementById("root"));
                      break
            				}

    				show();
    				function show() {
    					head = queue.shift();
    					if (head) {
    						head.style.backgroundColor = "Blue";
    						timer = setTimeout(function(){
    							head.style.backgroundColor = "White";
    							show();
    						}, 500);
                if (value) {
        					if (head.firstChild.nodeValue.trim() == value) {
        						queue = [];
        						clearTimeout(timer);
        						return ;
        					}
        					if (queue.length == 0) {
        						alert("未搜索到内容！");
        					}
        				}
    					}
    				}

    			};

  </script>
</html>
